<a class='text-decoration-none' style="color: black;" href="#" onclick="openModal({{ project.id }})">
    <div class="col mb-4" style="height: 10vw;">
        <div class=" h-100 " style='background-color: #BBE4F5; border-radius: 1rem;'>
            <div class="card-body">
                <h5 class="card-title">{{ project.title}}</h5>
                <p class="card-text">{{ project.description|truncatechars:110 }}</p>
            </div>
        </div>
    </div>
</a>

<div id="myModal" class="modal">
    <div class="modal-content col-6 p-5">
        <div class="d-flex justify-content-center align-items-center" style="height: 100%;">
            <div class="row">
                <div class="text-center mb-5">
                    <h2 id='modal-title'></h2>
                </div>
                <div class="row">
                    <div class="col-md-7">
                        <span>Описание:</span>
                        <p id='modal-description'></p>
                    </div>
                    <div class="col-md-5 text-center">
                        <span>Автор:</span>
                        <a id='modal-author-link'><p id='modal-author'></p></a>
                        <span>Категория:</span>
                        <p id='modal-category'></p>
                        <span>Язык:</span>
                        <p id='modal-programming-language'></p>
                    </div>
                    <div class='row'> 
                        <span>Ссылка на GitHub: <a id='modal-link-on-code' href=""></a></span>                  
                    </div>
                    <div class='row'>
                        <a id='modal-project-detail' href="">Перейти на полную версию проекта</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var modal = document.getElementById("myModal");
    var modalContent = document.getElementById("modal-content");

    function openModal(projectId) {
        event.preventDefault();
        fetch('/project_data/' + projectId)
            .then(response => response.json())
            .then(project => {
                document.getElementById('modal-title').textContent = project.title;
                document.getElementById('modal-description').textContent = project.description;
                document.getElementById('modal-author').textContent = project.author;
                document.getElementById('modal-author-link').href = '/persons/' + project.author;
                document.getElementById('modal-category').textContent = project.category;
                document.getElementById('modal-programming-language').textContent = project.programming_language;
                document.getElementById('modal-link-on-code').href = project.link_on_code;
                document.getElementById('modal-link-on-code').textContent = project.link_on_code;
                document.getElementById('modal-project-detail').href = '/project/' + project.id;
            });
    
        modal.style.display = "block";
    }
    
    window.onclick = function(event) {
        if (event.target == modal || modalContent.contains(event.target)) {
            event.preventDefault();
            modal.style.display = "none";
        }
    }
    
</script>


<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }
    
    .modal-content {
        margin: auto;
        background-color: #BBE4F5;
        border-radius: 1rem;
        max-width: 600px;
        padding: 1rem; /* Добавляем немного отступов вокруг содержимого */
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>
